# Получение ROOT прав на Huawei P30 Lite (MAR-LX1M)

> Данная операция требует нарушения физической целостности устройства, а также вливания денежных средств

> Все действия производятся исключительно на ваш страх и риск. Автор не несет ответственности за возможное повреждение устройства

> Операция влечет за собой потерю гарантии!

### С чем я столкнулся, пока изучал данный вопрос:
Невозможно включить Software TestPoint на данной модели через [DC-Phoenix](https://forum.dc-unlocker.com/forum/modems-and-phones/huawei/155916-dc-phoenix)
В лучшем случае вам придется перезагружать телефон, а программа будет вылетать с ошибкой

Можно попробовать собрать пакет обновления UPDATE.APP с кастомным рекавери, но залить его у меня не получилось
Если найдете способ - прошу опубликовать на 4PDA, где все будут рады т.к. это избавит от необходимости вскрывать устройство

Если у вас нет кода разблокировки загрузчика - придется вскрывать устройство и покупать HCU
В сумме операция может обойтись до 25 EUR без учета стоимости телефона

Сервис не будет ставить вам ROOT права. Даже не пытайтесь... Разве что по блату
Скажите, что вы хотите самостоятельно вытащить данные с устройства или как я скажите прямо, что вы собираетесь разлочить загрузчик (если спросят)

### Что нам потребуется:
1. Вскрытый телефон (Вам помогут в ближайшем сервисном центре со всем необходимым оборудованием за отдельную плату). Достаточно снять крышку с помощью фена и других приблуд
2. USB кабель (желательно родной и/или исправный)
3. [HCU (19 EUR)](https://hcu-client.com/buy/)
4. [Сервисная прошивка](https://4pda.to/forum/index.php?showtopic=951324&st=60)
5. [HiSuite](https://consumer.huawei.com/kz/support/hisuite/) актуальной версии
6. [Magisk](https://github.com/topjohnwu/Magisk/releases/tag/v25.2)
7. [Huawei Update Extractor](https://forum.xda-developers.com/t/tool-huawei-update-extractor-updated-v0-9-9-5-open-source-library.2433454/)
8. Драйвера
9. [ADB](https://4pda.to/forum/index.php?showtopic=383300) Tools (опционально)
10. Прямые руки

Все необходимое можно скачать с [моего сервера](https://londev.ru/mar-lx1m/)
Использование моих образов только на ваш страх и риск! [Magisk](https://londev.ru/mar-lx1m/magisk.img) я собирал на своем устройстве под свое устройство!
[RECOVERY_RAMDIS.img](https://londev.ru/mar-lx1m/RECOVERY_RAMDIS.img) - оригинальный загрузчик для версии 9.1.0 cea извлеченный из прошивки на 4PDA

## Подготовка
1. Скачиваем [прошивку](https://4pda.to/forum/index.php?showtopic=951324&st=60) версии 9.1.0 или установленную на телефоне
Дальнейшие действия не актуальны для тех, кто нашел свою версию прошивки и смог вытащить из нее необходимое
2. Откатываем постепенно телефон до версии 9.1.0 через [HiSuite](https://consumer.huawei.com/kz/support/hisuite/) (инструкция есть в интернете, все данные будут утеряны)
3. Вытаскиваем UPDATE.APP из прошивки и открываем через [Huawei Update Extractor](https://forum.xda-developers.com/t/tool-huawei-update-extractor-updated-v0-9-9-5-open-source-library.2433454/)
4. Вытаскиваем файл RECOVERY_RAMDIS.img
5. Скачиваем на телефон [Magisk](https://github.com/topjohnwu/Magisk/releases/tag/v25.2) и извлеченный файл
6. Патчим файл предварительно поставив обе галочки в [Magisk](https://github.com/topjohnwu/Magisk/releases/tag/v25.2)
7. Перекидываем результат работы на компьютер (файл будет в папке Downloads на устройстве)

## Сам процесс
1. Выключаем разобранный телефон (достаточно только снять крышку)
2. Замыкаем контакт [TestPoint](https://github.com/vse3211/huawei-p30-lite-root/blob/main/testpoint.jpg) на плате с металлической частью рядом и подключаем телефон к компьютеру с замкнутым контактом
Это нижний левый контакт (маленький)

Если все получилось - вы увидете COM порт в диспетчере устройств или неизвестное устройство, если у вас не установлены драйвера (установите в процессе, если требуется)
Как только увидели COM порт - размыкайте контакт. Он появится сразу при подключении кабеля. В противном случае выключаем телефон по завершению загрузки системы и повторяем операцию с замыканием

3. Открываем [HCU](https://hcu-client.com/buy/), авторизуемся, выбираем `fastboot/xloader`, переходим в одноименную вкладку
4. Находим Bootloader lock и устанавливаем в положение Unlocked (остальные поля не трогаем)
Заранее снимаем блокировку FRP через [DC-Phoenix](https://forum.dc-unlocker.com/forum/modems-and-phones/huawei/155916-dc-phoenix), если она имеется или предварительно выходим из гугл аккаунта и делаем сброс устройства
5. Жмем Repair и ждем завершения операции
6. Перезагружаемся в fastboot и наблюдаем 2 красные строчки внизу (phone unlocked, frp unlocked)
Если первая строчка зеленая - возвращаемся к первому пункту
7. Вводим в консоль `fastboot flash recovery_ramdisk magisk.img`
Где `magisk.img` это полученный от magisk образ
8. Перезагружаемся в систему `fastboot reboot` и видим, что рута нет (это нормально)
9. Выключаем телефон, отключаем кабель (обязательно) и загружаемся в Recovery (держим Vol+ + PowerBtn)
Телефон уведомит вас о разблокированном загрузчике и загрузится в систему
Возможны подтормаживания системы в ROOT режиме первые пару минут
10. Заходим в [Magisk](https://github.com/topjohnwu/Magisk/releases/tag/v25.2) и видим ROOT
Через него же вы сможете выдавать ROOT права приложениям и управлять ими

### Подключаем Google, ставим что хотели и радуемся жизни

Также [здесь](https://github.com/vse3211/huawei-p30-lite-root/) будут появляться скрины
Сейчас телефон в сервисе на заклеивании крышки, так что результаты работы появятся чуть позже
